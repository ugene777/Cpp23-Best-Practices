\filename{图 5. 会移除对“空”引用的测试}

\begin{cpp}
int get_value(int &thing) {
  if (&thing == nullptr) {
    // removed by compiler
    return 42;
  } else {
    return thing;
  }
}
\end{cpp}

创建一个空引用是未定义行为(UB)，请不要进行类似的尝试。在设计 API 时，请始终假设一个引用指向的是一个有效的对象，并利用这一事实来简化设计。

\begin{myTip}{练习：检查是否有对对象地址的判断}
使用 \verb|&thing ==| 来检查对象的特定内存地址有许多合理的用途，但这种检查也常常会误用。

请在代码中搜索所有检查对象内存地址的语句，理解其意图，并分析其正确性(或是否有效)。
\end{myTip}

这个练习能让你很好地锻炼各种搜索工具(如 grep)和正则表达式(regex)的使用能力。

\begin{myWarning}{}
思考一下，除了使用 ==，还有哪些方式可能在检查对象的地址？
\end{myWarning}

\mySubsectionNoFile{13.1}{资源}

\begin{itemize}
\item
-Wtautological-undefined-compare\footnote{\url{https://clang.llvm.org/docs/DiagnosticsReference.html\#wtautological-undefined-compare}}
\end{itemize}









